Civet Sourcemap Accuracy Test Log
===================================
Testing with library: source-map



--- BEGIN SCENARIO: Microtest3: inputPos and srcLine Synchronization ---
Input Civet Code:
// Civet L1
// Civet L2: tokenA then tokenB on the same line
first tokenA; second tokenB // Civet L3
// Civet L4
// Civet L5: call funcC
// Civet L6: call funcD on next line
call funcC
call funcD


Generated TypeScript Code:
// Civet L1
// Civet L2: tokenA then tokenB on the same line
first(tokenA); second(tokenB) // Civet L3
// Civet L4
// Civet L5: call funcC
// Civet L6: call funcD on next line
call(funcC)
call(funcD)


Generated Sourcemap JSON:
{
  "version": 3,
  "file": "Microtest3: inputPos and srcLine Synchronization.js",
  "sources": [
    "Microtest3: inputPos and srcLine Synchronization.civet"
  ],
  "mappings": "AAAA,WAAW;AACX,AAAA,gDAAgD;AAChD,AAAA,KAAK,CAAA,AAAC,MAAM,CAAA,CAAC,CAAC,MAAM,CAAA,AAAC,MAAM,CAAA,CAAC,WAAW;AACvC,AAAA,WAAW;AACX,AAAA,uBAAuB;AACvB,AAAA,oCAAoC;AACpC,AAAA,AAAA,IAAI,CAAA,AAAC,KAAK,CAAA;AACV,AAAA,AAAA,IAAI,CAAA,AAAC,KAAK,CAAA;AACV",
  "names": [],
  "sourcesContent": [
    "// Civet L1\n// Civet L2: tokenA then tokenB on the same line\nfirst tokenA; second tokenB // Civet L3\n// Civet L4\n// Civet L5: call funcC\n// Civet L6: call funcD on next line\ncall funcC\ncall funcD\n"
  ]
}

SCENARIO OVERALL STATUS: ✅ PASSED

--- TOKEN MAPPING VERIFICATION ---

--- Testing Token: 'L3 tokenA' (with source-map) ---
  Target Generated  : TS Line 3, Col 7
  Expected Original : Civet Line 3, Col 6
  Actual Mapped     : Civet Line 3, Col 6 (Source: Microtest3: inputPos and srcLine Synchronization.civet)
  Status            : PASSED
--- End Token: 'L3 tokenA' ---

--- Testing Token: 'L3 tokenB' (with source-map) ---
  Target Generated  : TS Line 3, Col 25
  Expected Original : Civet Line 3, Col 21
  Actual Mapped     : Civet Line 3, Col 21 (Source: Microtest3: inputPos and srcLine Synchronization.civet)
  Status            : PASSED
--- End Token: 'L3 tokenB' ---

--- Testing Token: 'L6 funcC' (with source-map) ---
  Target Generated  : TS Line 6, Col 5
  Expected Original : Civet Line 6, Col 0
  Actual Mapped     : Civet Line 6, Col 0 (Source: Microtest3: inputPos and srcLine Synchronization.civet)
  Status            : PASSED
--- End Token: 'L6 funcC' ---

--- Testing Token: 'L7 funcD' (with source-map) ---
  Target Generated  : TS Line 7, Col 5
  Expected Original : Civet Line 7, Col 5
  Actual Mapped     : Civet Line 7, Col 5 (Source: Microtest3: inputPos and srcLine Synchronization.civet)
  Status            : PASSED
--- End Token: 'L7 funcD' ---
--- END SCENARIO: Microtest3: inputPos and srcLine Synchronization ---



[MAP-DEBUG] inputPos: 0 → rawLine,rawCol: 0 0 colOffset: 0
[MAP-DEBUG] Pushing to @lines[0]: genCol:0, srcFileIdx:0, absOrigLine:0, absOrigCol:0
[MAP-DEBUG] inputPos: 11 → rawLine,rawCol: 0 11 colOffset: 0
[MAP-DEBUG] Pushing to @lines[0]: genCol:11, srcFileIdx:0, absOrigLine:0, absOrigCol:11
[MAP-DEBUG] Pushing to @lines[1]: genCol:0, srcFileIdx:0, absOrigLine:1, absOrigCol:0
[MAP-DEBUG] inputPos: 12 → rawLine,rawCol: 1 0 colOffset: 0
[MAP-DEBUG] Pushing to @lines[1]: genCol:0, srcFileIdx:0, absOrigLine:1, absOrigCol:0
[MAP-DEBUG] inputPos: 60 → rawLine,rawCol: 1 48 colOffset: 0
[MAP-DEBUG] Pushing to @lines[1]: genCol:48, srcFileIdx:0, absOrigLine:1, absOrigCol:48
[MAP-DEBUG] Pushing to @lines[2]: genCol:0, srcFileIdx:0, absOrigLine:2, absOrigCol:0
[MAP-DEBUG] inputPos: 61 → rawLine,rawCol: 2 0 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:0, srcFileIdx:0, absOrigLine:2, absOrigCol:0
[MAP-DEBUG] inputPos: 66 → rawLine,rawCol: 2 5 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:5, srcFileIdx:0, absOrigLine:2, absOrigCol:5
[MAP-DEBUG] inputPos: 66 → rawLine,rawCol: 2 5 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:1, srcFileIdx:0, absOrigLine:2, absOrigCol:5
[MAP-DEBUG] inputPos: 67 → rawLine,rawCol: 2 6 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:0, srcFileIdx:0, absOrigLine:2, absOrigCol:6
[MAP-DEBUG] inputPos: 73 → rawLine,rawCol: 2 12 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:6, srcFileIdx:0, absOrigLine:2, absOrigCol:12
[MAP-DEBUG] inputPos: 73 → rawLine,rawCol: 2 12 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:1, srcFileIdx:0, absOrigLine:2, absOrigCol:12
[MAP-DEBUG] inputPos: 74 → rawLine,rawCol: 2 13 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:1, srcFileIdx:0, absOrigLine:2, absOrigCol:13
[MAP-DEBUG] inputPos: 75 → rawLine,rawCol: 2 14 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:1, srcFileIdx:0, absOrigLine:2, absOrigCol:14
[MAP-DEBUG] inputPos: 81 → rawLine,rawCol: 2 20 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:6, srcFileIdx:0, absOrigLine:2, absOrigCol:20
[MAP-DEBUG] inputPos: 81 → rawLine,rawCol: 2 20 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:1, srcFileIdx:0, absOrigLine:2, absOrigCol:20
[MAP-DEBUG] inputPos: 82 → rawLine,rawCol: 2 21 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:0, srcFileIdx:0, absOrigLine:2, absOrigCol:21
[MAP-DEBUG] inputPos: 88 → rawLine,rawCol: 2 27 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:6, srcFileIdx:0, absOrigLine:2, absOrigCol:27
[MAP-DEBUG] inputPos: 88 → rawLine,rawCol: 2 27 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:1, srcFileIdx:0, absOrigLine:2, absOrigCol:27
[MAP-DEBUG] inputPos: 89 → rawLine,rawCol: 2 28 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:1, srcFileIdx:0, absOrigLine:2, absOrigCol:28
[MAP-DEBUG] inputPos: 100 → rawLine,rawCol: 2 39 colOffset: 0
[MAP-DEBUG] Pushing to @lines[2]: genCol:11, srcFileIdx:0, absOrigLine:2, absOrigCol:39
[MAP-DEBUG] Pushing to @lines[3]: genCol:0, srcFileIdx:0, absOrigLine:3, absOrigCol:0
[MAP-DEBUG] inputPos: 101 → rawLine,rawCol: 3 0 colOffset: 0
[MAP-DEBUG] Pushing to @lines[3]: genCol:0, srcFileIdx:0, absOrigLine:3, absOrigCol:0
[MAP-DEBUG] inputPos: 112 → rawLine,rawCol: 3 11 colOffset: 0
[MAP-DEBUG] Pushing to @lines[3]: genCol:11, srcFileIdx:0, absOrigLine:3, absOrigCol:11
[MAP-DEBUG] Pushing to @lines[4]: genCol:0, srcFileIdx:0, absOrigLine:4, absOrigCol:0
[MAP-DEBUG] inputPos: 113 → rawLine,rawCol: 4 0 colOffset: 0
[MAP-DEBUG] Pushing to @lines[4]: genCol:0, srcFileIdx:0, absOrigLine:4, absOrigCol:0
[MAP-DEBUG] inputPos: 136 → rawLine,rawCol: 4 23 colOffset: 0
[MAP-DEBUG] Pushing to @lines[4]: genCol:23, srcFileIdx:0, absOrigLine:4, absOrigCol:23
[MAP-DEBUG] Pushing to @lines[5]: genCol:0, srcFileIdx:0, absOrigLine:5, absOrigCol:0
[MAP-DEBUG] inputPos: 137 → rawLine,rawCol: 5 0 colOffset: 0
[MAP-DEBUG] Pushing to @lines[5]: genCol:0, srcFileIdx:0, absOrigLine:5, absOrigCol:0
[MAP-DEBUG] inputPos: 173 → rawLine,rawCol: 5 36 colOffset: 0
[MAP-DEBUG] Pushing to @lines[5]: genCol:36, srcFileIdx:0, absOrigLine:5, absOrigCol:36
[MAP-DEBUG] Pushing to @lines[6]: genCol:0, srcFileIdx:0, absOrigLine:6, absOrigCol:0
[MAP-DEBUG] inputPos: 174 → rawLine,rawCol: 6 0 colOffset: 0
[MAP-DEBUG] Pushing to @lines[6]: genCol:0, srcFileIdx:0, absOrigLine:6, absOrigCol:0
[MAP-DEBUG] inputPos: 174 → rawLine,rawCol: 6 0 colOffset: 0
[MAP-DEBUG] Pushing to @lines[6]: genCol:0, srcFileIdx:0, absOrigLine:6, absOrigCol:0
[MAP-DEBUG] inputPos: 178 → rawLine,rawCol: 6 4 colOffset: 0
[MAP-DEBUG] Pushing to @lines[6]: genCol:4, srcFileIdx:0, absOrigLine:6, absOrigCol:4
[MAP-DEBUG] inputPos: 178 → rawLine,rawCol: 6 4 colOffset: 0
[MAP-DEBUG] Pushing to @lines[6]: genCol:1, srcFileIdx:0, absOrigLine:6, absOrigCol:4
[MAP-DEBUG] inputPos: 179 → rawLine,rawCol: 6 5 colOffset: 0
[MAP-DEBUG] Pushing to @lines[6]: genCol:0, srcFileIdx:0, absOrigLine:6, absOrigCol:5
[MAP-DEBUG] inputPos: 184 → rawLine,rawCol: 6 10 colOffset: 0
[MAP-DEBUG] Pushing to @lines[6]: genCol:5, srcFileIdx:0, absOrigLine:6, absOrigCol:10
[MAP-DEBUG] inputPos: 184 → rawLine,rawCol: 6 10 colOffset: 0
[MAP-DEBUG] Pushing to @lines[6]: genCol:1, srcFileIdx:0, absOrigLine:6, absOrigCol:10
[MAP-DEBUG] Pushing to @lines[7]: genCol:0, srcFileIdx:0, absOrigLine:7, absOrigCol:0
[MAP-DEBUG] inputPos: 185 → rawLine,rawCol: 7 0 colOffset: 0
[MAP-DEBUG] Pushing to @lines[7]: genCol:0, srcFileIdx:0, absOrigLine:7, absOrigCol:0
[MAP-DEBUG] inputPos: 185 → rawLine,rawCol: 7 0 colOffset: 0
[MAP-DEBUG] Pushing to @lines[7]: genCol:0, srcFileIdx:0, absOrigLine:7, absOrigCol:0
[MAP-DEBUG] inputPos: 189 → rawLine,rawCol: 7 4 colOffset: 0
[MAP-DEBUG] Pushing to @lines[7]: genCol:4, srcFileIdx:0, absOrigLine:7, absOrigCol:4
[MAP-DEBUG] inputPos: 189 → rawLine,rawCol: 7 4 colOffset: 0
[MAP-DEBUG] Pushing to @lines[7]: genCol:1, srcFileIdx:0, absOrigLine:7, absOrigCol:4
[MAP-DEBUG] inputPos: 190 → rawLine,rawCol: 7 5 colOffset: 0
[MAP-DEBUG] Pushing to @lines[7]: genCol:0, srcFileIdx:0, absOrigLine:7, absOrigCol:5
[MAP-DEBUG] inputPos: 195 → rawLine,rawCol: 7 10 colOffset: 0
[MAP-DEBUG] Pushing to @lines[7]: genCol:5, srcFileIdx:0, absOrigLine:7, absOrigCol:10
[MAP-DEBUG] inputPos: 195 → rawLine,rawCol: 7 10 colOffset: 0
[MAP-DEBUG] Pushing to @lines[7]: genCol:1, srcFileIdx:0, absOrigLine:7, absOrigCol:10
[MAP-DEBUG] Pushing to @lines[8]: genCol:0, srcFileIdx:0, absOrigLine:8, absOrigCol:0

  .

  1 passing (230ms)
